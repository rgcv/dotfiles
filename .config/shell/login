#!/bin/sh
## XDG Base Directory spec
# shellcheck disable=SC2174
[ -d "$XDG_RUNTIME_DIR" ] || mkdir -pm 0700 "$XDG_RUNTIME_DIR"

## umask
umask 0077

## graphic session
if [ -z "$DISPLAY" ]; then
  TTY=$(tty || echo "${XDG_VTNR--1}")
  case ${TTY#/dev/tty} in
    1) command -v sway        >/dev/null && exec sway ;;
    2) command -v startx      >/dev/null && exec startx "$XINITRC" -- ":1" ;;
    3) command -v gnome-shell >/dev/null && exec gnome-shell --wayland ;;
  esac; unset TTY
fi
